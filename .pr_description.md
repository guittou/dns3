# PR: fix(zones): use shared zone-combobox helpers on Zones page and ensure script load order

## Branch
`fix/zones-use-shared-combobox`

## Summary
This PR fixes the issue where the Zones page was not using the shared zone-combobox helpers, resulting in inconsistent zone list ordering between DNS and Zones pages.

After multiple PRs extracted shared helpers for building "master + sorted includes" lists, the behavior works correctly in console when injecting helpers manually, but the Zones page doesn't load/use these helpers in production because `populateZoneListForDomain` was undefined (cause: helper script was loaded but the Zones page wasn't using it properly).

## Changes Made

### Commit 1: refactor(ui): add shared zone-combobox helper
- Added `populateZoneListForDomain(domainId)` - API wrapper for fetching and ordering zones
- Added `initServerSearchCombobox(opts)` - Generic server-first combobox initializer
- Updated IMPLEMENTATION_SUMMARY_PAGINATION.md with script loading order requirements
- Exported functions on window for global access

### Commit 2: fix(ui): use shared populateZoneListForDomain in Zones page
- Modified `populateZoneComboboxForDomain()` in zone-files.js to delegate to shared `window.populateZoneListForDomain`
- Added defensive fallback implementation if helper is missing
- Added startup check to log missing helpers with clear error messages
- Verified script loading order in templates (already correct: zone-combobox.js → zone-files.js → dns-records.js)

## Expected Behavior

Both DNS and Zones pages now display zone lists identically:
- ✅ Master zone appears first
- ✅ Include zones sorted alphabetically (case-insensitive)  
- ✅ Server-side ACL filtering still applied
- ✅ No console errors
- ✅ Console debug traces available for verification

## Manual Testing Checklist
- [ ] Hard-refresh both pages after assets rebuild
- [ ] DNS page: select domain → verify master first, includes sorted A-Z
- [ ] Zones page: select same domain → verify identical order to DNS page
- [ ] When no domain selected, both comboboxes should be disabled
- [ ] Check browser console for errors (should be none, only debug logs)
- [ ] Verify ACL filtering still works for non-admin users
- [ ] Test search functionality (queries ≥2 chars use server search)

## Technical Details

### Script Loading Order (Verified)
Both `zone-files.php` and `dns-management.php` templates load scripts in correct order:
1. `zone-combobox.js` ← Shared helpers (must load first)
2. `zone-files.js` ← Zones page logic (depends on zone-combobox.js)
3. `dns-records.js` ← DNS page logic (depends on zone-combobox.js)

### Defensive Programming
- Helper functions check if dependencies are available
- Fallback inline implementation if shared helper is missing
- Startup check logs missing helpers to console with clear error messages
- Functions exported on both `window.ZoneComboboxHelpers` namespace and individual `window.*` for backward compatibility

### ACL and Performance
- ACL filtering and server-side pagination remain unchanged
- Server-first search strategy (queries ≥2 chars) maintained
- No performance regression expected
